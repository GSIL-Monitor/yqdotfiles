<!-- This Apple Help template put together by Andy Matuschak
	http://www.andymatuschak.org
	andy@andymatuschak.org
	Version 1.0

	Adapted from the Safari help book-thanks, Apple!
	Adapted more directly from Pixen's help book.
	Licensed under MIT. -->

	<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/sgml/loosedtd.html">
	<html>
	<head>
		<title>Writing shell scripts for Hazel</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="unix, commandline, bash" />
		<meta name="description" content="Learn how to write shell scripts that Hazel can trigger." />
		<link media="all" rel="stylesheet" href="../css/topicPage.css" />
	</head>
	<body>
		<A NAME="support"></A>
		<A NAME="ShellScript"></A>

		<div id="banner">
			<div id="machelp">
				<a name="rules"></a>
				<!-- Specify a category in the anchor above; then you can
					link to listings of every topic in a given category. -->
				<a class="bread" href="help:anchor='access' bookID=Hazel Help">Hazel Help</a>
				<!-- The above links back to the index page -->
			</div>
			<div id="index">
				<a class="leftborder" href="index.html">Index</a>
			</div>
		</div>
		<div id="mainbox">
			<div id="caticon">
				<img class="icon" src="../gfx/icon.png" alt="Hazel Icon" />
			</div>
			<div id="pagetitle">
				<h1>Writing shell scripts for Hazel</h1>
			</div>
            
            <p>Using Hazel's "Passes shell script" condition or "Run shell script" action, you can have Hazel run shell scripts or trigger any external command-line program. Some important points about running scripts/programs with Hazel:</p>
			<ul>
			<li>Hazel will pass one argument which is the path of the file being processed.</li>
			<li>The program/script can be written in any language (including Perl and Python) as long as you tell Hazel which shell/interpreter to use.</li>
			</ul>
			
			<br/>
			<h3>Embeded vs. External</h3>
			<p>Hazel can run scripts in one of two ways: embedded or external.</p>
			<p>When running an embedded script, you can enter the script using Hazel's built-in editor. Here you can also specify the shell/interpreter to use (sh, perl, python, etc). Embedded scripts are stored with your rules and therefore do not need to be exported/imported separately when transferring your rules.</p>
			<p>When using an external script, you can have Hazel trigger a script/program already on your disk. The program must be executable. If it is a script, it should start with a sha-bang (<code>#!</code>) line to indicate which interpreter to use. When transferring rules between machines, the scripts must be transferred separately.</p>
            
            <br/>
            <h2>Using shellscripts for use in a rule condition</h2>
            <ul>
            <li>When using scripts in a rule condition, the script should exit with a 0 status to indicate that the
            file passes the condition. Any other exit status will tell Hazel that the file does not match the condition.</li>
            <li>Since rule conditions tend to be evaluated many times, you should make sure the scripts runs quickly. Time consuming scripts will greatly affect performance.</li>
            <li>The script must not modify any files or folders underneath the folder Hazel is monitoring as it can result in a loop where Hazel never stops processing the folder.</li>
            </ul>
            
            <br/>
            <h2>Using shellscripts for use in a rule action</h2>
            <p>When using scripts via the "Run shell script" action, the script should return 0 to indicate that the action was performed successfully. Any other value indicates an error and the rule will be re-executed until the action proceeds successfully.</p>
            <br/>

			<h2 class="seealso">See also</h2>
			<p class="seealso">
				<a href="ruleReference.html">Rule Reference</a><br/>
				<a href="help:topic_list=rules bookID=Hazel Help template=css/genlist.html stylesheet=css/genlist_style.css Other=Rule Topics">Rule Topics</a>
			</p>
		</div>
	</body>
</html>